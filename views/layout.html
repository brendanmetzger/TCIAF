<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:cc="http://creativecommons.org/ns#" xmlns:svg="http://www.w3.org/2000/svg" xml:lang="en" lang="en">
  <!-- insert views/head.html-->
  <body class="[$_action]" data-user="[$user]" data-position="">
    <button onclick="document.body.classList.toggle('menu');" class="menu-trigger" aria-label="Toggle Site Menu">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10" style="stroke:#444;stroke-width:0.5">
        <path d="M2 3L8 3M2 5 L 8 5M 2 7L8 7"/>
        <path class="action"/>
        <path class="status"/>
        <path d="M3 3L 7 7 M 7 3 L 3 7"/>
      </svg>
    </button>
    
    <header class="panel white-bg">
      <form class="finder search white-bg">
        <label style="height:0;display:block;overflow:hidden;" for="finder">Search for features, events, competitions or People</label>
        <input type="text" value="" id="finder" data-path="search/cluster" data-topic="feature, happening, competition, person, article, collection" autocomplete="off" spellcheck="off" placeholder="search"/>
        <noscript id="site-search" class="Search" data-id="finder">The Third Coast Festival Audio Player Requires Javascript</noscript>
      </form>
      
      <nav role="navigation" class="panel">
        <a href="/" class="logo" title="Go to the Third Coast Homepage">Home</a>
        <ul class="plain caps-lock h5 rag-left">
          <li><a href="/overview/library">Listen</a></li>
          <li><a href="/overview/playlists">Playlists</a></li>
          <li><a href="/conference/2020-third-coast-conference">Conference</a></li>
          <li><a href="/competition/">Competitions</a></li>
          <!-- <li><a href="https://www.thefestchicago.org">The Fest</a></li> -->
          <li><a href="/overview/events">News &amp; Events</a></li>
          <!-- <li><a href="/explore/shoppe">Shoppe</a></li> -->
          <li><a href="/residency/">Radio Residency</a></li>
          <li><a href="/overview/tciaf">About</a></li>
          <li  class="special"><a href="https://donatenow.networkforgood.org/ThirdCoast">Donate</a></li>
        </ul>
      </nav>
      
      <section id="media">
        <noscript id="Player" class="Player" data-queue="" data-controls="controls" data-playlist="plain playlist h6 white-bg">
          <!-- player requires javascript -->
        </noscript>
      </section>
      
    </header>
    
    <section id="browse" class="column">
      <main>
        <!-- replace content nextSibling -->
        <section class="landing">
          <div style="[background:#ffc22d url(//s3.amazonaws.com/$collection:photo:url) no-repeat 0 50%;background-size:cover;margin-top:-2vmax;]" class="banner">
            <div>
              <h2 data-id="[$collection:@id]" style="color:rgba(0,0,0,0);">[$collection:title]</h2>
              <div class="callout">[$collection:summary]</div>
            </div>
          </div>
          <article>
            <ul class="plain seven">
              <li style="color:#5b9c99;">
                <h4 class="h1 display lead pad"><span style="font-size:125%">Listen</span></h4>
                <p class="pad-h">Click the play button to hear the best in radio &amp; podcasting, curated worldwide since 2001.</p>
              </li>
              <!-- iterate collection:seven -->
              <li>
                <div>
                  <div class="controls">
                    <!-- iterate item:media:audio -->
                    <!--  insert views/partials/play-button.html-->
                    <span class="h4" style="margin:0.25em 0 0 0.75em">[$item:year / $item:duration]</span>
                  </div>
                    <h3 class="display tracked"><a href="[$item:permalink]" class="blocky">[$item:title]</a></h3>
                    <p>[$item:summary]</p>
                </div>
                <ul class="plain conjunct" style="display:none">
                  <!-- iterate item:producers -->
                  <li><a href="[$person:permalink]" data-id="[$person:@id]">[$person:@title]</a></li>
                </ul>
              </li>
            </ul>
          </article>
          <hr style="margin-top:1vh;margin-bottom:1vh;"/>
          <article>
            <!-- iterate collection:articles -->
            <ul class="plain seven">
              <li style="color:#5b9c99;">
                <h2 class="h1 display lead pad" data-id="[$article:@id]">[$article:title]</h2>
                <p class="pad-h">Catch up on the latest news and events</p>
              </li>
              <!-- iterate article:sections -->
              <li>
                <h3 class="display tracked h4">[$title]</h3>
                <div class="markdown">[$content]</div>
              </li>
            </ul>
          </article>
        </section>
      </main>
      <!-- insert views/pages/footer.html -->
      <!-- replace helper -->
    </section>

  
    <script type="text/javascript">bloc.load();</script>
    <style type="text/css" media="screen">
      /* <![CDATA[ */
      .seven {
        display: flex;
        flex-wrap: wrap;
      }
      @media (min-width: 850px) {
        .seven {
          margin-left:-2.5vmax;
        }
        .banner div.callout {
          font-size:1.75em;
        }
      }
      .seven > li {
        margin: 0.5em;
        background-color: #fff;
        flex: 2 0 calc(25% - 1em);
        min-width: 20em;
        padding:1.5em;
      }
      @media (max-width: 40em) {
        .seven {
          margin-left:0;
          flex-direction: column;
        }
        .seven > li {
          height: auto;
        }
      }
      .banner .callout {
        position:absolute;
        bottom: 0;
        right: 0;
        margin: 0;
        line-height:0.5;
        width: 100%;
        background-color: #fff;
        background: linear-gradient(90deg, rgba(255,255,255,0.95), rgba(255,255,255,0.75));
        padding: 1em 5%;
        font-size: 1.25em;
      }
      div#ad {
        width: 100vw;
        height: 100vh;
        position: fixed;
        top: 0;
        left: 0;
        z-index: 1000;
        text-align: right;
        font-size:1.25em;
        background-color: rgba(25,20,15,0.9);
        box-shadow: inset 0 0 10em rgba(0,0,0,0.1);
        transition: opacity 0.5s;
      }
      div#ad > span {
        position: absolute;
        top: 2em;
        right: 2em;
        color: #fff;
        text-transform:uppercase;
      }
      
      div#ad > span:hover {
        color: rgba(255,255,255,0.5);
        cursor: pointer;
      }
      div#ad a {
        display: block;
        width: 60vw;
        margin: 50vh auto;
        transform: translate(0, -50%);
        box-shadow: 0 0 15em rgba(0,0,0,0.25);
      }
      div#ad img {
        width: 100%;
      }
      div#ad ~ * {
        filter: blur(2px);
      }
      /* ]]> */
    </style>
    <script type="text/javascript">
      // <![CDATA[
        // mind, month is n-1 as Jan is 0 
        if (new Date(2018, 3, 16) > new Date() && (document.cookie.split(' ').map(c => c.split('=')).find(a => a[0] == "S")||[false,';']).pop().slice(0,-1) != '1') {
          var splash = document.body.appendChild(document.createElement('div'));
          splash.appendChild(document.createElement('span')).textContent = 'âœ• Click background to close';

          var link =  splash.appendChild(document.createElement('a'));
          var img  = link.appendChild(document.createElement('img'));
          
          splash.classList.add('fade');
          splash.id   = 'ad';
          link.href   = 'https://third-coast-festival.networkforgood.com/events/5827-third-coast-extravaganza';
          link.target = '_blank';
          img.src     = 'https://3rdcoast-cms.s3.amazonaws.com/splash-page-extravaganza.jpg';
          
          splash.addEventListener('click', function (evt) {
            this.parentNode.removeChild(this);
          });
          setTimeout(document.insertBefore.bind(document.body, splash, document.body.firstChild), 750);
          setTimeout(DOMTokenList.prototype.remove.bind(splash.classList, 'fade'), 250);
          document.cookie = 'S=1; expires='+(new Date(Date.now() + (60 * 60 * 12 * 1000)));
        }
      
      // ]]>
    </script>
  </body>
</html>